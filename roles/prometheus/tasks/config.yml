---
- name: prometheus | secret | create
  k8s:
    kubeconfig: "{{ kubeconfig }}"
    state: "{{ project.state }}"
    definition: "{{ lookup('template', 'secret.yml.j2') }}"
  tags:
  - prometheus
  - prometheus_secret

- name: prometheus | configmap | template
  k8s:
    kubeconfig: "{{ kubeconfig }}"
    state: "{{ project.state }}"
    definition: "{{ lookup('template', 'template.yml.j2') }}"
  tags:
  - prometheus
  - prometheus_configmap
  - prometheus_template